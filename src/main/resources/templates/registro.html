<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Crear Cuenta</title>
<link rel="stylesheet" href="Css/login.css">
<!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
          <link rel="icon" type="image/svg+xml" href="Imagenes/logo4.png">


</head>
<body>
<div class="header">LSJ</div>
    <div class="header-container">
        <a th:href="@{/}" class="logo">
          <img class="logo" th:src="@{/Css/img/logo.png}" alt="Logo de la tienda">
        </a>
    
    <div class="search-container">
            <form class="search-form" action="/buscar" method="get" title="buscar">
                <input type="text-2" class="search-input" placeholder="Buscar productos..." name="q">
                <button type="submit" class="search-button">
                    <i class="fas fa-search"></i>
                </button>
            </form>
    </div>
    


        <div class="icon-container">
            <a th:href="@{/registro}" class="icon" title="Registro">
                <i class="fas fa-user-plus"></i>
            </a>
            <a th:href="@{/catalogo}" class="icon" title="Catálogo">
                <i class="fas fa-book"></i>
            </a>
            <a th:href="@{/pasarela}" class="icon" title="Carrito de compras">
                <i class="fas fa-shopping-cart"></i>
            </a>
        </div>
    </div>




   <div class="container_formulario">
  <!-- Formulario -->
  <div class="form-container">
    <h2>Crear Cuenta</h2>

    <div class="social-icons">
     <div class="icon-circle" onclick="loginGoogle()">
  <i class="fab fa-google"></i>
</div>

      <div class="icon-circle">
        <i class="fab fa-facebook-f"></i>
      </div>
    </div>

    <p style="color:#666; font-size:14px;">
      o usa tu correo electrónico para registrarte
    </p>

    <!-- Formulario con validación HTML -->
    <form id="registroForm">
    <input type="text" id="nombre" placeholder="Nombre" required />
    <input type="text" id="apellido" placeholder="Apellido" required />
    <input type="email" id="email" placeholder="Correo electrónico" required />
    <input type="password" id="password" placeholder="Contraseña" required />
    <input type="text" id="direccion" placeholder="Dirección (opcional)" />
    <label>
  </form>

      <div class="checkbox">
        <input type="checkbox" id="terminos" required>
        <label for="terminos">
          Acepto los <a href="#">Términos</a> y
          <a href="#">Políticas de privacidad</a>.
        </label>
      </div>

      <div class="btn-container">
        <button type="submit" class="btn btn-red">
          Registrarse
        </button>
        <button type="button" class="btn btn-outline" onclick="window.location.href='Login.html'">
          Iniciar Sesión
        </button>
      </div>
    </form>
  </div>

  <!-- Imagen -->
  <div class="image-container">
    <img th:src="@{/CSS/img/icono_logo.png}" alt="Imagen Registro">
  </div>
</div>

</body>
<script>
document.getElementById("registroForm").addEventListener("submit", async function(e) {
  e.preventDefault();

  const payload = {
    nombre: document.getElementById("nombre").value.trim(),
    apellido: document.getElementById("apellido").value.trim(),
    correo: document.getElementById("email").value.trim(),
    contrasena: document.getElementById("password").value.trim(),
    direccion: document.getElementById("direccion").value.trim()
  };

  try {
    const res = await fetch("/api/auth/register", { // si sirves la página desde Spring Boot
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload)
    });

    const data = await res.json();
    if (res.ok && data.status === "success") {
      alert("Registro exitoso");
      window.location.href = "index.html";
    } else {
      alert("Error: " + (data.message || "No se pudo registrar"));
    }
  } catch (err) {
    console.error(err);
    alert("Error de conexión con el servidor.");
  }
});
</script>
</html>
